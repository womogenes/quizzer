<!doctype html>
<html class="h-full" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LAPS quiz</title>
    <link rel="icon" href="assets/favicon.svg" />

    <meta
      property="og:description"
      content="A little quiz for Lakeside Fall Festival 2023"
    />
    <meta property="og:title" content="Quiz!" />
    <meta
      property="og:image"
      content="https://raw.githubusercontent.com/womogenes/quizzer/8b20e75f404404a053347ebbbae9759e4be3646f/assets/favicon.svg"
    />

    <!-- Our resources -->
    <link rel="stylesheet" href="css/style.css" />
    <script src="js/quiz1.js" defer></script>
    <script src="js/index.js" defer></script>

    <!-- Apline JS -->
    <script src="https://cdn.jsdelivr.net/npm/@alpinejs/persist@3.x.x/dist/cdn.min.js"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/@alpinejs/mask@3.x.x/dist/cdn.min.js"
    ></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <style>
      /* No blips, Alpine feature */
      [x-cloak] {
        display: none !important;
      }
    </style>

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />

    <!-- Icons -->
    <link href="https://cdn.lineicons.com/4.0/lineicons.css" rel="stylesheet" />
  </head>

  <body class="flex h-full flex-col items-center">
    <main class="flex h-full w-full justify-center">
      <!-- Main display content -->
      <div
        class="flex max-w-5xl flex-col items-start gap-4 sm:flex-row sm:gap-6 md:p-12"
        x-show="$store.quizLoaded"
        x-cloak
        x-data="{ answered() { return $store.answerStatus.endsWith('correct'); } }"
      >
        <!-- Left column -->
        <div
          class="flex w-full flex-col sm:flex-col-reverse md:flex-col"
          x-data
        >
          <img
            class="h-24 w-full border-none bg-neutral-200 object-cover sm:block sm:h-96 md:rounded-lg"
            :src="$store.curQues.imageURL"
            id="image"
          />

          <div class="flex flex-col gap-4 px-4 pt-4 sm:pb-4 md:px-0">
            <div>
              <span>
                Question
                <span class="font-bold" x-text="$store.curIdx + 1"></span> of
                <span
                  class="font-bold"
                  x-text="$store.questions?.length"
                ></span>
              </span>
            </div>

            <p
              class="text-lg font-bold md:text-3xl"
              x-text="$store.curQues.question"
            ></p>
          </div>
        </div>

        <!-- Right column -->
        <div
          class="flex w-full flex-col items-start gap-4 px-0 sm:p-0 sm:px-4 sm:pr-6 sm:pt-6 md:pr-0 md:pt-0"
        >
          <!-- Scoreboard -->
          <div class="px-4">
            Score:
            <span
              class="font-bold"
              x-text="$store.answerHistory.reduce((a, b) => a + b, 0)"
            ></span>
            /
            <span class="font-bold" x-text="$store.answerHistory.length"></span>
          </div>

          <!-- Options grid -->
          <div
            class="grid w-full grid-cols-1 gap-0 border-y md:gap-4 md:border-none"
            id="options-grid"
            x-data
          >
            <template x-for="(option, index) in $store.curQues.options">
              <div
                :class="`md:rounded border-y md:border-2 px-4 py-2 md:px-4 md:py-4 transition-all hover:cursor-pointer hover:bg-neutral-50 ${
                  answered() && [$store.chosenOption, $store.curQues.answer].includes(index)
                    ? ($store.curQues.answer === index
                        ? '!bg-green-100 !border-green-200 z-20'
                        : '!bg-red-100 !border-red-200 z-20')
                    : 'bg-white'
                  } }`"
                @click="answer(index)"
              >
                <span
                  class="mr-2 text-neutral-400"
                  x-text="`${'ABCDE'.substring(index, index+1)}.`"
                ></span>
                <span x-text="option"></span>
              </div>
            </template>
          </div>

          <div
            class="flex flex-col gap-2 px-4 text-2xl font-bold"
            x-data
            x-cloak
            x-show="answered()"
            x-transition
          >
            <div
              class="text-green-600"
              x-show="$store.answerStatus == 'correct'"
            >
              Correct üòÑ
            </div>
            <div
              class="text-red-600"
              x-show="$store.answerStatus == 'incorrect'"
            >
              Incorrect üôÅ
            </div>
            <div class="text-base font-normal text-neutral-600">
              Press any key or tap to continue
            </div>
          </div>
        </div>
      </div>
    </main>
  </body>
</html>
